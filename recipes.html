<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Management - Recipe Sharing Platform</title>
    <link rel="stylesheet" href="Users_recipes_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Alkatra&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <aside class="sidebar">
            <div class="user-profile">
                <img src="faouzia.jpeg" alt="User Avatar" class="user-avatar">
                <h3>Admin User</h3>
            </div>
            <nav>
                <ul>
                    <li><a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="users.html"><i class="fas fa-users"></i> User Management</a></li>
                    <li><a href="recipes.html" class="active"><i class="fas fa-utensils"></i> Recipe Management</a></li>
                    <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
                    <li><a href="index.html"><i class="fas fa-home"></i> Logout</a></li>
                </ul>
            </nav>
        </aside>

        <main class="main-content">
            <div class="welcome-container">
                <h2>Recipe management</h2>
            </div>

            <section id="recipe-list">
                <h2>Recipe List</h2>
                <button id="add-recipe-btn"><i class="fas fa-plus"></i> Add New Recipe</button>
                <table id="recipeTable">
                    <thead>
                        <tr>
                            <th>Image</th>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Author</th>
                            <th>Date Created</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><img src="EBA.jpg" alt="Eba and Egusi" class="recipe-thumb"></td>
                            <td>1</td>
                            <td>Eba and Egusi</td>
                            <td>Faouzia Ouiya</td>
                            <td>2024-05-01</td>
                            <td>
                                <button class="action-btn view-btn" title="View Recipe"><i class="fas fa-eye"></i> View</button>
                                <button class="action-btn edit-btn" title="Edit Recipe"><i class="fas fa-edit"></i> Edit</button>
                                <button class="action-btn delete-btn" title="Delete Recipe"><i class="fas fa-trash-alt"></i> Delete</button>
                            </td>
                        </tr>
                        <tr>
                            <td><img src="eggs.jpg" alt="Fried Eggs" class="recipe-thumb"></td>
                            <td>2</td>
                            <td>Fried Eggs</td>
                            <td>Omo Naija</td>
                            <td>2024-04-04</td>
                            <td>
                                <button class="action-btn view-btn" title="View Recipe"><i class="fas fa-eye"></i> View</button>
                                <button class="action-btn edit-btn" title="Edit Recipe"><i class="fas fa-edit"></i> Edit</button>
                                <button class="action-btn delete-btn" title="Delete Recipe"><i class="fas fa-trash-alt"></i> Delete</button>
                            </td>
                        </tr>
                        <tr>
                            <td><img src="rice.jpg" alt="Rice and Ofe Akwu" class="recipe-thumb"></td>
                            <td>3</td>
                            <td>Rice and Ofe Akwu</td>
                            <td>Lotiii Austine</td>
                            <td>2059-05-02</td>
                            <td>
                                <button class="action-btn view-btn" title="View Recipe"><i class="fas fa-eye"></i> View</button>
                                <button class="action-btn edit-btn" title="Edit Recipe"><i class="fas fa-edit"></i> Edit</button>
                                <button class="action-btn delete-btn" title="Delete Recipe"><i class="fas fa-trash-alt"></i> Delete</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </main>
    </div>

    <!-- Add Recipe Modal -->
    <div id="addModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Add New Recipe</h2>
            <form id="addForm" class = "form" onsubmit="return addRecipe(event)">
                <label for="addTitle">Recipe Title:</label>
                <input type="text" id="addTitle" required>
                <div id="titleError" class="error"></div>

                <label for="addIngredients">Ingredients:</label>
                <textarea id="addIngredients" required></textarea>
                <div id="ingredientsError" class="error"></div>

                <label for="addOrigin">Origin:</label>
                <input type="text" id="addOrigin" required>
                <div id="originError" class="error"></div>

                <label for="addNutritionalValue">Nutritional Value:</label>
                <textarea id="addNutritionalValue" required></textarea>
                <div id="nutritionalValueError" class="error"></div>

                <label for="addAllergens">Allergen Information:</label>
                <input type="text" id="addAllergens">
                <div id="allergensError" class="error"></div>

                <label for="addShelfLife">Shelf Life:</label>
                <input type="text" id="addShelfLife" required>
                <div id="shelfLifeError" class="error"></div>

                <label for="addImage">Recipe Image URL:</label>
                <input type="text" id="addImage" required>
                <div id="imageError" class="error"></div>

                <label for="addPrepTime">Preparation Time (minutes):</label>
                <input type="number" id="addPrepTime" min="1" required>
                <div id="prepTimeError" class="error"></div>

                <label for="addCookTime">Cooking Time (minutes):</label>
                <input type="number" id="addCookTime" min="1" required>
                <div id="cookTimeError" class="error"></div>

                <label for="addServingSize">Serving Size:</label>
                <input type="text" id="addServingSize" required>
                <div id="servingSizeError" class="error"></div>

                <label for="addDescription">Food Description:</label>
                <textarea id="addDescription" required></textarea>
                <div id="descriptionError" class="error"></div>

                <label for="addCalories">Calories per Serving:</label>
                <input type="number" id="addCalories" min="1" required>
                <div id="caloriesError" class="error"></div>

                <label for="addFoodOrigin">Food Origin:</label>
                <input type="text" id="addFoodOrigin" required>
                <div id="foodOriginError" class="error"></div>

                <label for="addInstructions">Instructions:</label>
                <textarea id="addInstructions" required></textarea>
                <div id="instructionsError" class="error"></div>


                <button type="submit">Add Recipe</button>
            </form>
        </div>
    </div>

    <!-- View Recipe Modal -->
    <div id="viewModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Recipe Details</h2>
            <div id="recipeDetails"></div>
        </div>
    </div>

    <!-- Edit Recipe Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Edit Recipe</h2>
            <form id="editForm" class = "form" onsubmit="return updateRecipe(event)">
                <input type="hidden" id="editRecipeId">
                
                <label for="editTitle">Title:</label>
                <input type="text" id="editTitle" required>
                <div id="titleError" class="error"></div>

                <label for="editIngredients">Ingredients:</label>
                <textarea id="editIngredients" required></textarea>
                <div id="ingredientsError" class="error"></div>

                <label for="editOrigin">Origin:</label>
                <input type="text" id="editOrigin" required>
                <div id="originError" class="error"></div>

                <label for="editNutritionalValue">Nutritional Value:</label>
                <textarea id="editNutritionalValue" required></textarea>
                <div id="nutritionalValueError" class="error"></div>

                <label for="editAllergens">Allergen Information:</label>
                <input type="text" id="editAllergens">
                <div id="allergensError" class="error"></div>

                <label for="editShelfLife">Shelf Life:</label>
                <input type="text" id="editShelfLife" required>
                <div id="shelfLifeError" class="error"></div>

                <label for="editImage">Recipe Image URL:</label>
                <input type="text" id="editImage" required>
                <div id="imageError" class="error"></div>

                <label for="editPrepTime">Preparation Time (minutes):</label>
                <input type="number" id="editPrepTime" min="1" required>
                <div id="prepTimeError" class="error"></div>

                <label for="editCookTime">Cooking Time (minutes):</label>
                <input type="number" id="editCookTime" min="1" required>
                <div id="cookTimeError" class="error"></div>

                <label for="editServingSize">Serving Size:</label>
                <input type="text" id="editServingSize" required>
                <div id="servingSizeError" class="error"></div>

                <label for="editDescription">Food Description:</label>
                <textarea id="editDescription" required></textarea>
                <div id="descriptionError" class="error"></div>

                <label for="editCalories">Calories per Serving:</label>
                <input type="number" id="editCalories" min="1" required>
                <div id="caloriesError" class="error"></div>

                <label for="editFoodOrigin">Food Origin:</label>
                <input type="text" id="editFoodOrigin" required>
                <div id="foodOriginError" class="error"></div>

                <label for="editInstructions">Instructions:</label>
                <textarea id="editInstructions" required></textarea>
                <div id="instructionsError" class="error"></div>

                <button type="submit">Save Changes</button>
            </form>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Recipe Sharing Platform. All rights reserved by Austine Omo Naija.</p>
    </footer>

    <script>
        // Simulated recipe data (replace with actual data fetching in a real application)
let recipes = [
    { id: 1, title: "Eba and Egusi", author: "Faouzia Ouiya", avatar: "EBA.jpg", creationDate: "2024-05-01", ingredients: "Eba, Egusi", origin: "Nigeria", nutritionalValue: "High in calories", allergens: "None", shelfLife: "2 days", prepTime: 30, cookTime: 45, servingSize: "4 servings", description: "A traditional Nigerian dish", calories: 500, foodOrigin: "West Africa", instructions: "1. Prepare Eba\n2. Cook Egusi soup" },
    { id: 2, title: "Fried Eggs", author: "Omo Naija", avatar: "eggs.jpg", creationDate: "2024-04-04", ingredients: "Eggs, Oil, Salt, Pepper", origin: "Global", nutritionalValue: "High in protein", allergens: "Eggs", shelfLife: "1 day", prepTime: 5, cookTime: 10, servingSize: "2 servings", description: "Simple and delicious fried eggs", calories: 200, foodOrigin: "Global", instructions: "1. Heat oil in a pan \n2. Crack eggs into the pan" },
    { id: 3, title: "Rice and Ofe Akwu", author: "Lota Austine", avatar: "rice.jpg", creationDate: "2024-05-02", ingredients: "Rice, Palm nut, Meat", origin: "Nigeria", nutritionalValue: "Balanced meal", allergens: "None", shelfLife: "3 days", prepTime: 40, cookTime: 60, servingSize: "6 servings", description: "A hearty Nigerian dish", calories: 600, foodOrigin: "West Africa", instructions: "1. Cook rice\n2. Prepare Ofe Akwu soup" }
];

function renderRecipeTable() {
    const tableBody = document.querySelector("#recipeTable tbody");
    tableBody.innerHTML = "";
    recipes.forEach(recipe => {
        const row = `
            <tr data-id="${recipe.id}">
                <td><img src="${recipe.avatar}" alt="${recipe.title}" class="recipe-thumb"></td>
                <td>${recipe.id}</td>
                <td>${recipe.title}</td>
                <td>${recipe.author}</td>
                <td>${recipe.creationDate}</td>
                <td>
                    <button class="action-btn view-btn" onclick="viewRecipe(${recipe.id})"><i class="fas fa-eye"></i> View</button>
                    <button class="action-btn edit-btn" onclick="editRecipe(${recipe.id})"><i class="fas fa-edit"></i> Edit</button>
                    <button class="action-btn delete-btn" onclick="deleteRecipe(${recipe.id})"><i class="fas fa-trash-alt"></i> Delete</button>
                </td>
            </tr>
        `;
        tableBody.innerHTML += row;
    });
}

function viewRecipe(recipeId) {
    const recipe = recipes.find(re => re.id === recipeId);
    const modal = document.getElementById("viewModal");
    const recipeDetails = document.getElementById("recipeDetails");
    
    recipeDetails.innerHTML = `
        <div class="recipe-header">
            <img src="${recipe.avatar}" alt="${recipe.title}" class="recipe-avatar">
            <h3>${recipe.title}</h3>
        </div>
        <div class="recipe-info">
            <p><strong>ID:</strong> ${recipe.id}</p>
            <p><strong>Author:</strong> ${recipe.author}</p>
            <p><strong>Creation Date:</strong> ${recipe.creationDate}</p>
            <p><strong>Origin:</strong> ${recipe.origin}</p>
            <p><strong>Food Origin:</strong> ${recipe.foodOrigin}</p>
            <p><strong>Preparation Time:</strong> ${recipe.prepTime} minutes</p>
            <p><strong>Cooking Time:</strong> ${recipe.cookTime} minutes</p>
            <p><strong>Serving Size:</strong> ${recipe.servingSize}</p>
            <p><strong>Calories per Serving:</strong> ${recipe.calories}</p>
            <p><strong>Shelf Life:</strong> ${recipe.shelfLife}</p>
        </div>
        <div class="recipe-description">
            <h4>Description:</h4>
            <p>${recipe.description}</p>
        </div>
        <div class="recipe-ingredients">
            <h4>Ingredients:</h4>
            <p>${recipe.ingredients}</p>
        </div>
        <div class="recipe-nutrition">
            <h4>Nutritional Value:</h4>
            <p>${recipe.nutritionalValue}</p>
        </div>
        <div class="recipe-allergens">
            <h4>Allergen Information:</h4>
            <p>${recipe.allergens}</p>
        </div>
        <div class="recipe-instructions">
            <h4>Instructions:</h4>
            <p>${recipe.instructions}</p>
        </div>
    `;
    
    modal.style.display = "block";
}

function editRecipe(recipeId) {
    const recipe = recipes.find(re => re.id === recipeId);
    const modal = document.getElementById("editModal");
    
    document.getElementById("editRecipeId").value = recipe.id;
    document.getElementById("editTitle").value = recipe.title;
    document.getElementById("editIngredients").value = recipe.ingredients;
    document.getElementById("editOrigin").value = recipe.origin;
    document.getElementById("editNutritionalValue").value = recipe.nutritionalValue;
    document.getElementById("editAllergens").value = recipe.allergens;
    document.getElementById("editShelfLife").value = recipe.shelfLife;
    document.getElementById("editImage").value = recipe.avatar;
    document.getElementById("editPrepTime").value = recipe.prepTime;
    document.getElementById("editCookTime").value = recipe.cookTime;
    document.getElementById("editServingSize").value = recipe.servingSize;
    document.getElementById("editDescription").value = recipe.description;
    document.getElementById("editCalories").value = recipe.calories;
    document.getElementById("editFoodOrigin").value = recipe.foodOrigin;
    document.getElementById("editInstructions").value = recipe.instructions;
    
    modal.style.display = "block";
}

function updateRecipe(event) {
    event.preventDefault();
    const recipeId = parseInt(document.getElementById("editRecipeId").value);
    const title = document.getElementById("editTitle").value;
    const ingredients = document.getElementById("editIngredients").value;
    const origin = document.getElementById("editOrigin").value;
    const nutritionalValue = document.getElementById("editNutritionalValue").value;
    const allergens = document.getElementById("editAllergens").value;
    const shelfLife = document.getElementById("editShelfLife").value;
    const image = document.getElementById("editImage").value;
    const prepTime = parseInt(document.getElementById("editPrepTime").value);
    const cookTime = parseInt(document.getElementById("editCookTime").value);
    const servingSize = document.getElementById("editServingSize").value;
    const description = document.getElementById("editDescription").value;
    const calories = parseInt(document.getElementById("editCalories").value);
    const foodOrigin = document.getElementById("editFoodOrigin").value;
    const instructions = document.getElementById("editInstructions").value;

    if (validateForm("edit")) {
        const recipeIndex = recipes.findIndex(re => re.id === recipeId);
        if (recipeIndex !== -1) {
            recipes[recipeIndex] = {
                ...recipes[recipeIndex],
                title,
                ingredients,
                origin,
                nutritionalValue,
                allergens,
                shelfLife,
                avatar: image,
                prepTime,
                cookTime,
                servingSize,
                description,
                calories,
                foodOrigin,
                instructions
            };
            renderRecipeTable();
            document.getElementById("editModal").style.display = "none";
        }
    }
}

function deleteRecipe(recipeId) {
    if (confirm("Are you sure you want to delete this recipe?")) {
        recipes = recipes.filter(re => re.id !== recipeId);
        renderRecipeTable();
    }
}

function addRecipe(event) {
    event.preventDefault();
    const title = document.getElementById("addTitle").value;
    const ingredients = document.getElementById("addIngredients").value;
    const origin = document.getElementById("addOrigin").value;
    const nutritionalValue = document.getElementById("addNutritionalValue").value;
    const allergens = document.getElementById("addAllergens").value;
    const shelfLife = document.getElementById("addShelfLife").value;
    const image = document.getElementById("addImage").value;
    const prepTime = parseInt(document.getElementById("addPrepTime").value);
    const cookTime = parseInt(document.getElementById("addCookTime").value);
    const servingSize = document.getElementById("addServingSize").value;
    const description = document.getElementById("addDescription").value;
    const calories = parseInt(document.getElementById("addCalories").value);
    const foodOrigin = document.getElementById("addFoodOrigin").value;
    const instructions = document.getElementById("addInstructions").value;

    if (validateForm("add")) {
        const newRecipe = {
            id: recipes.length + 1,
            title,
            ingredients,
            origin,
            nutritionalValue,
            allergens,
            shelfLife,
            avatar: image,
            prepTime,
            cookTime,
            servingSize,
            description,
            calories,
            foodOrigin,
            instructions,
            author: "Admin User",
            creationDate: new Date().toISOString().split('T')[0]
        };
        recipes.push(newRecipe);
        renderRecipeTable();
        document.getElementById("addModal").style.display = "none";
        document.getElementById("addForm").reset();
    }
}

function validateForm(formType) {
    let isValid = true;
    const fields = [
        "Title", "Ingredients", "Origin", "NutritionalValue", "ShelfLife", "Image",
        "PrepTime", "CookTime", "ServingSize", "Description", "Calories", "FoodOrigin", "Instructions"
    ];

    fields.forEach(field => {
        const inputElement = document.getElementById(`${formType}${field}`);
        const errorElement = document.getElementById(`${field.toLowerCase()}Error`);
        
        if (inputElement.value.trim() === "") {
            isValid = false;
            errorElement.textContent = `${field} is required`;
        } else if ((field === "PrepTime" || field === "CookTime" || field === "Calories") && parseInt(inputElement.value) <= 0) {
            isValid = false;
            errorElement.textContent = `${field} must be a positive number`;
        } else {
            errorElement.textContent = "";
        }
    });

    return isValid;
}

document.getElementById("add-recipe-btn").onclick = function() {
    document.getElementById("addModal").style.display = "block";
}

document.querySelectorAll(".close").forEach(closeBtn => {
    closeBtn.onclick = function() {
        this.closest(".modal").style.display = "none";
    }
});

window.onclick = function(event) {
    if (event.target.classList.contains("modal")) {
        event.target.style.display = "none";
    }
}

// Add event listeners for form submissions
document.getElementById("addForm").addEventListener("submit", addRecipe);
document.getElementById("editForm").addEventListener("submit", updateRecipe);

// Initial render
renderRecipeTable();

</script>
</body>
</html>